<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="NCT Discography">
    <meta name="author" content="wiznaibus">
    <title>NCT Discography</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.slim.min.js"
        integrity="sha256-u7e5khyithlIdTpu22PHhENmPcRdFiHRjhAuHcs05RI=" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/feather-icons"></script>
    <script src="data.js"></script>
    <link href="styles.css" rel="stylesheet" />
</head>

<body>
    <div class="container">
        <main id="main">
            <div class="row pt-3 pb-2 mb-3 border-bottom">
                <div class="col-12 col-lg-4">
                    <h4>NCT Discography</h4>
                    <p>This is an ongoing discography project designed to quickly and conveniently display which members participated in specific songs.</p>
                    <!-- <h4>Unit</h4>
                    <div class="d-flex justify-content-between flex-wrap align-items-center pt-3 pb-2 mb-3">
                        <input type="checkbox" class="btn-check" id="toggleNctU" autocomplete="off" checked>
                        <label class="btn btn-nct btn-sm" for="toggleNctU">NCT U</label>
                        <input type="checkbox" class="btn-check" id="toggleNct127" autocomplete="off" checked>
                        <label class="btn btn-nct btn-sm" for="toggleNct127">NCT 127</label>
                        <input type="checkbox" class="btn-check" id="toggleNctDream" autocomplete="off" checked>
                        <label class="btn btn-nct btn-sm" for="toggleNctDream">NCT DREAM</label>
                        <input type="checkbox" class="btn-check" id="toggleWayv" autocomplete="off" checked>
                        <label class="btn btn-nct btn-sm" for="toggleWayv">WayV</label>
                    </div> -->
                </div>
                <div class="col-12 col-lg-8">
                    <div class="d-flex justify-content-between flex-wrap flex-md-nowrapalign-items-start">
                        <h4>Filter</h4>
                        <div>
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" id="toggleNonParticipatingMembers">
                                <label class="form-check-label" for="toggleNonParticipatingMembers">Hide
                                    Non-participating
                                    Members</label>
                            </div>
                        </div>
                    </div>
                    <div id="groupMembers"
                        class="d-flex justify-content-between flex-wrap align-items-center pt-3 pb-2 mb-3">
                        <input type="radio" class="btn-check" name="filterMembers" id="filterMembersAll" value="all"
                            autocomplete="off" checked>
                        <label class="btn btn-nct btn-sm" for="filterMembersAll">All Members</label>
                        <!-- Member filters get inserted here -->
                    </div>
                </div>
            </div>
            <!-- Main body gets generated here -->
        </main>

        <footer class="mb-4 text-center">
            <small>Made with love ðŸ’š by <a href="https://github.com/wiznaibus/nct" target="_blank">wiznaibus</a></small>
        </footer>
    </div>
</body>

<script type="text/javascript">
    const albums = data.albums;
    const members = data.members;

    /*
    * To-do: Refactor everything
    */

    let membersFilter = document.getElementById("groupMembers");

    members.forEach(member => {
        let memberFilterRadio = document.createElement("input");
        memberFilterRadio.setAttribute("type", "radio");
        memberFilterRadio.setAttribute("autocomplete", "off");
        memberFilterRadio.className = "btn-check";
        memberFilterRadio.id = "filterMembers" + member;
        memberFilterRadio.name = "filterMembers";
        memberFilterRadio.value = member.toLowerCase();

        let memberFilterLabel = document.createElement("label");
        memberFilterLabel.className = "btn btn-nct btn-sm";
        memberFilterLabel.setAttribute("for", "filterMembers" + member);
        memberFilterLabel.appendChild(document.createTextNode(member));

        membersFilter.appendChild(memberFilterRadio);
        membersFilter.appendChild(memberFilterLabel);
    });

    let content = document.getElementById("main");
    const tableHeaders = ["#", "Track", "Artist", "Language", "Participating Members"];
    const numberGridClasses = "col-1 col-md-1 col-lg-1";
    const trackGridClasses = "col-5 col-md-11 col-lg-6";
    const artistGridClasses = "col-3 col-md-12 col-lg-3";
    const languageGridClasses = "col-3 col-md-12 col-lg-2";

    albums.forEach(album => {
        let albumDiv = document.createElement("div");
        albumDiv.className = "album-div";

        album.artist.forEach(artist => {
            let formattedArtist;
            switch (artist) {
                case "NCT U":
                    formattedArtist = "nctu";
                    break;
                case "NCT 127":
                    formattedArtist = "nct127";
                    break;
                case "NCT DREAM":
                    formattedArtist = "nctdream";
                    break;
                case "WayV":
                case "WayV-KUN&XIAOJUN":
                    formattedArtist = "wayv";
                    break;
            }
            albumDiv.classList.add("artist-" + formattedArtist);
            albumDiv.classList.add("artist-" + formattedArtist + "-visible");
        });

        let titleDiv = document.createElement("div");
        titleDiv.className = "d-flex justify-content-between flex-wrap align-items-start";

        let infoElement = document.createElement("div");

        let nameElement = document.createElement("H2");
        nameElement.appendChild(document.createTextNode(album.name));

        //

        let releaseDateElement = document.createElement("p");
        releaseDateElement.className = "mb-0";
        releaseDateElement.appendChild(document.createTextNode("Release Date: " + album.release_date));
        let typeElement = document.createElement("p");
        typeElement.className = "mb-0";
        typeElement.appendChild(document.createTextNode("Type: " + album.type));
        let linksElement = document.createElement("p");

        if (album.links !== undefined) {
            album.links.forEach(link => {
                let linkElement = document.createElement("a");
                linkElement.href = link.url;
                linkElement.className = "btn btn-nct btn-sm";
                linkElement.setAttribute("target", "_blank");
                linkElement.appendChild(document.createTextNode(link.type));
                linksElement.appendChild(linkElement);
            });
        }

        let albumCoverElement = document.createElement("img");
        albumCoverElement.src = album.cover_url;
        albumCoverElement.className = "album-cover";

        infoElement.appendChild(nameElement);
        infoElement.appendChild(releaseDateElement);
        infoElement.appendChild(typeElement);
        infoElement.appendChild(linksElement);

        titleDiv.appendChild(infoElement);
        titleDiv.appendChild(albumCoverElement);

        albumDiv.appendChild(titleDiv);

        let tableDiv = document.createElement("div");
        tableDiv.className = "table mb-5";

        let table = document.createElement("table");
        table.className = "table table-sm";

        let thead = document.createElement("thead");
        let headerRow = document.createElement("tr");

        let th = document.createElement("th");
        th.scope = "col";
        th.className = "col-6";

        let thMembers = document.createElement("th");
        thMembers.scope = "col";
        thMembers.className = "col-6 participating-members";
        thMembers.appendChild(document.createTextNode("Participating Members"));

        let headerDiv = document.createElement("div");
        headerDiv.className = "row";

        tableHeaders.forEach(header => {
            if (header === "Participating Members") {
                return;
            }

            let div = document.createElement("div");
            switch (header) {
                case "#":
                    div.className = numberGridClasses;
                    break;
                case "Track":
                    div.className = trackGridClasses;
                    break;
                case "Artist":
                    div.className = artistGridClasses;
                    break;
                case "Language":
                    div.className = languageGridClasses;
                    break;
            }
            div.appendChild(document.createTextNode(header));
            headerDiv.appendChild(div);
        });

        th.appendChild(headerDiv);
        headerRow.appendChild(th);
        headerRow.appendChild(thMembers);

        thead.appendChild(headerRow);
        table.appendChild(thead);

        let tbody = document.createElement("tbody");

        album.tracks.forEach(track => {

            let bodyRow = document.createElement("tr");
            bodyRow.className = "track-tr";

            let formattedArtist;
            switch (track.artist) {
                case "NCT U":
                    formattedArtist = "nctu";
                    break;
                case "NCT 127":
                    formattedArtist = "nct127";
                    break;
                case "NCT DREAM":
                    formattedArtist = "nctdream";
                    break;
                case "WayV":
                case "WayV-KUN&XIAOJUN":
                    formattedArtist = "wayv";
                    break;
            }
            bodyRow.classList.add("artist-" + formattedArtist);
            bodyRow.classList.add("artist-" + formattedArtist + "-visible");

            let td = document.createElement("td");

            let div = document.createElement("div");
            div.className = "row";

            let numberTd = document.createElement("div");
            numberTd.appendChild(document.createTextNode(track.number));

            let nameTd = document.createElement("div");
            nameTd.appendChild(document.createTextNode(track.name));

            if (track.links !== undefined) {
                track.links.forEach(link => {
                    //<a href=""><i data-feather="youtube"></i></a>
                    let linkElement = document.createElement("a");
                    linkElement.className = "youtube";
                    linkElement.style = "margin-left: 5px";
                    linkElement.setAttribute("target", "_blank");
                    linkElement.href = link.url;
                    let linkIcon = document.createElement("i");
                    linkIcon.setAttribute("data-feather", "youtube");
                    linkElement.appendChild(linkIcon);
                    nameTd.appendChild(linkElement);
                });
            }

            let artistTd = document.createElement("div");
            artistTd.appendChild(document.createTextNode(track.artist));

            let languageTd = document.createElement("div");
            languageTd.appendChild(document.createTextNode(track.language.join(", ")));

            numberTd.className = numberGridClasses
            nameTd.className = trackGridClasses;
            artistTd.className = artistGridClasses;
            languageTd.className = languageGridClasses;

            let participatingMembersTd = document.createElement("td");
            participatingMembersTd.className = "participating-members-list";
            let participatingMembersDiv = document.createElement("div");
            participatingMembersDiv.className = "d-flex justify-content-between flex-wrap align-items-center";

            album.participating_members.forEach(member => {
                albumDiv.classList.add("member-" + member.toLowerCase());

                let memberBadge = document.createElement("span");
                memberBadge.className = "badge rounded-pill";

                if (track.participating_members.includes(member)) {
                    switch (track.artist) {
                        case "NCT U":
                            memberBadge.classList.add("bg-nctu");
                            break;
                        case "NCT 127":
                            if (track.name === "Switch (feat. SR15B)" && member === "Doyoung") {
                                memberBadge.classList.add("bg-nctu");
                            }
                            else {
                                memberBadge.classList.add("bg-nct127");
                            }
                            break;
                        case "NCT DREAM":
                            memberBadge.classList.add("bg-nctdream");
                            break;
                        case "WayV":
                        case "WayV-KUN&XIAOJUN":
                            memberBadge.classList.add("bg-wayv");
                            break;
                    }

                    //might have to move this somewhere else/format it better
                    bodyRow.classList.add("member-" + member.toLowerCase());
                    //bodyRow.classList.add("member-" + member.toLowerCase() + "-visible");
                }
                else {
                    memberBadge.classList.add("bg-nonparticipating");
                }

                memberBadge.appendChild(document.createTextNode(member));
                participatingMembersDiv.appendChild(memberBadge);
            });

            participatingMembersTd.appendChild(participatingMembersDiv);

            div.appendChild(numberTd);
            div.appendChild(nameTd);
            div.appendChild(artistTd);
            div.appendChild(languageTd);
            td.appendChild(div);
            bodyRow.appendChild(td);
            bodyRow.appendChild(participatingMembersTd);

            tbody.appendChild(bodyRow);
        });

        table.appendChild(tbody);
        tableDiv.appendChild(table);
        albumDiv.appendChild(tableDiv);
        content.appendChild(albumDiv);
    });

</script>


<script type="text/javascript">
    feather.replace();

    $("#toggleNonParticipatingMembers").click(function () {
        if (document.getElementById("toggleNonParticipatingMembers").checked) {
            $(".bg-nonparticipating").hide();
        }
        else {
            $(".bg-nonparticipating").show();
        }
    });

    $("input[type=radio][name=filterMembers]").on('change', function () {
        if ($(this).val() === "all") {
            $(".album-div").show();
            $("tbody tr").show();
        }
        else {
            $(".member-" + $(this).val()).show();
            $(".album-div").not(".member-" + $(this).val()).hide();
            $("tbody tr").not(".member-" + $(this).val()).hide();
        }
    });

    /* $("#toggleNctU").click(function () {
        if (document.getElementById("toggleNctU").checked) {
            $(".artist-nctu").addClass("artist-nctu-visible");
        }
        else {
            $(".artist-nctu").removeClass("artist-nctu-visible");
        }
        updateStriping();
    });

    $("#toggleNct127").click(function () {
        if (document.getElementById("toggleNct127").checked) {
            $(".artist-nct127").addClass("artist-nct127-visible");
        }
        else {
            $(".artist-nct127").removeClass("artist-nct127-visible");
        }
        updateStriping();
    });

    $("#toggleNctDream").click(function () {
        if (document.getElementById("toggleNctDream").checked) {
            $(".artist-nctdream").addClass("artist-nctdream-visible");
        }
        else {
            $(".artist-nctdream").removeClass("artist-nctdream-visible");
        }
        updateStriping();
    });

    $("#toggleWayv").click(function () {
        if (document.getElementById("toggleWayv").checked) {
            $(".artist-wayv").addClass("artist-wayv-visible");
        }
        else {
            $(".artist-wayv").removeClass("artist-wayv-visible");
        }
        updateStriping();
    });*/
</script>

</html>